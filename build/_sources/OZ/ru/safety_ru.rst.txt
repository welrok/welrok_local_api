Безопасность
~~~~~~~~~~~~

Реализована возможность управления с включенной блокировкой изменений по локальной сети (``lanBlock`` = **1**; ``bLc`` = **Lan**).

.. note::
	Если включены обе блокировки (параметры ``lanBlock`` = **1** и ``cloudBlock`` = **1**; пункт меню ``bLc`` = **on**),
	то устройство заблокировано полностью, управление возможно только с кнопок.

Для аутентификации источника при отправке команд на устройство используется TOTP протокол (**rfc4226**, **rfc6238**, Interval = 30 second, Digit = 9). 
Для этого необходимо добавить два поля перед полями с данными:

``time`` - время в секундах от 01.01.2000 00:00

``auth`` - вычисленный токен.
 
 .. code-block:: json
 
	{
	 "sn":"404CCAAAD4E8A89860609800000149",
	 "time":"634929122",
	 "auth":"672201707",
	 "par":[[125,7,"0"], [23,2,"1"], [114,7,"1"]]
	}

Ключ для генерации токена можно получить через `АПИ сервера <keyGet_ru.html>`_.

Если нет необходимости использовать аутентификацию, то для управления по локальной сети необходимо отключить блокировку.

Просмотреть статус блокировки можно в телеметрии - ключ ``m.3``, в настройках - параметр ``lanBlock`` или в меню - пункт ``bLc``.

Отключается блокировка через меню устройства - параметр ``bLc`` надо изменить на **oFF**. 

.. note::
		* В 2-х кнопочных устройствах для этого надо удерживать левую кнопку до появления меню ``reg``. Нажатием левой кнопки перейти в пункт меню ``bLc``. Нажатием правой кнопки выбрать пункт **oFF**
		* В 3-х и более кнопочных кратковремено нажимать на среднюю кнопку до надписи ``bLc``, после этого кнопками выбора изменить на **oFF**