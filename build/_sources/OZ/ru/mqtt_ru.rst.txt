**MQTT**
========

Доступна возможность сбора телеметрии и управление ключевыми параметрами по протоколу MQTT.
Настройки подключения к MQTT серверу доступны только через веб-интерфейс устройства, который доступен по его локальному IP адресу:

``Host``/``Port`` - IP адрес и порт MQTT сервера

``User``/``Password`` - имя пользователя и пароль для подключения к MQTT серверу

``Keep alive`` - максимально допустимый промежуток времени без обмена данными

``QoS`` - уровень качества обслуживания

``Publish prefix`` - префикс публикации для отправки телеметрии

``Subscribe path`` - название пути для подписки на комманды

``Client ID`` - имя устройства

.. note::
		Если на сервере MQTT не настроена авторизация, то поля ``User``/ ``Password`` игнорируются.

.. important::
		Максимальная длина имени ``User`` и ``Password`` составляет 30 символов.

Раз в минуту, с интервалом +/- 5 секунд, публикуются данные в следующие топики:

``Publish prefix``/``Client ID``/``get``/``floorTemp`` - показания датчика температуры пола, `телеметрия <telemetry_ru.html>`_ **"t.1"** в °C строкой "xx.x" (модели с датчиком пола)

``Publish prefix``/``Client ID``/``get``/``airTemp`` - показания датчика температуры воздуха, `телеметрия <telemetry_ru.html>`_ **"t.2"** в °C строкой "xx.x" (модели с датчиком воздуха)

``Publish prefix``/``Client ID``/``get``/``protTemp`` - показания внутреннего датчика перегрева, `телеметрия <telemetry_ru.html>`_ **"t.0"** в °C строкой "xx.x"

``Publish prefix``/``Client ID``/``get``/``setTemp`` - температура уставки, `телеметрия <telemetry_ru.html>`_ **"t.5"** в °C строкой "xx.x"

``Publish prefix``/``Client ID``/``get``/``powerOff`` - устройство выключено, `телеметрия <telemetry_ru.html>`_ **"f.16"** строкой "0" - включено, "1" - выключено

``Publish prefix``/``Client ID``/``get``/``load`` - состояние нагрузки, `телеметрия <telemetry_ru.html>`_ **"f.0"** строкой "0" - выключена, "1" - включена

``Publish prefix``/``Client ID``/``get``/``typeCtrl`` – тип контроля, `телеметрия <telemetry_ru.html>` **"m.0"** строкой 0-по полу, 1- по воздуху, 2- по воздуху с ограничением по полу

``Publish prefix``/``Client ID``/``get``/``maxFlrTmp`` – максимально допустимая температура пола для режима контроля “по воздух, с ограничением по полу”

``Publish prefix``/``Client ID``/``get``/``minFlrTmp`` – минимально допустимая температура пола для режима контроля “по воздух, с ограничением по полу”

``Publish prefix``/``Client ID``/``get``/``bright`` – яркось дисплея

Доступны следующие топики для управления:

.. note:: 
		После отправки команды управления, через 3-5 секунд происходит внеочередная публикация данных.

``Subscribe path``/``Client ID``/``set``/``setTemp`` - температура уставки, аналогично `параметру <parameters_ru.html>`_ ``setTemperature``

``Subscribe path``/``Client ID``/``set``/``bright`` - яркость дисплея, аналогично `параметру <parameters_ru.html>`_ ``brightness``

``Subscribe path``/``Client ID``/``set``/``powerOff`` - выключение устройства, аналогично `параметру <parameters_ru.html>`_ ``powerOff``

``Subscribe path``/``Client ID``/``set``/``mode`` - выбор режима работы, аналогично `параметру <parameters_ru.html>`_ ``mode``

``Subscribe path``/``Client ID``/``set``/``typeCtrl`` – тип контроля: 0-по полу, 1- по воздуху, 2- по воздуху с ограничением по полу, аналогично `параметру <parameters_ru.html>`_ ``controlType``

``Publish prefix``/``Client ID``/``set``/``maxFlrTmp`` – максимально допустимая температура пола для режима контроля “по воздух, с ограничением по полу”

``Publish prefix``/``Client ID``/``set``/``minFlrTmp`` – минимально допустимая температура пола для режима контроля “по воздух, с ограничением по полу”

.. note::
   Температура датчика пола в пользовательском меню устройства и через API изменяется с шагом в 1 °C во всем рабочем диапазоне. Температура датчика воздуха в пользовательском меню устройства изменяется с шагом 1 °C в диапазоне от -15 °C до -10 °C, с шагом 0.5 °C в диапазоне от -10 °C до 75 °C (для устройств с датчиком воздуха). Температура датчика воздуха при управлении через API изменяется с шагом 0.1 °C во всем рабочем диапазоне (для устройств с датчиком воздуха).

.. note::
	Параметры 29 и 31, в режиме работы по расписанию и временном режиме, могут принимать значения 127 и -127, что соответствует значениям уставки **on** (нагрузка всегда включена) и **off** (нагрузка всегда отключена) в графическом интерфейсе и на дисплее устройства.