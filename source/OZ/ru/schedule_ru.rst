Расписание
~~~~~~~~~~

.. Important::
   Возможность управления по локальной сети без токена безопасности по умолчанию `заблокирована <safety_ru.html>`_ в целях безопасности. Это может быть актуальным, например, при использовании локального управления в общественных местах. Если данная мера безопасности не нужна, отключите ее на устройстве, переведя параметр ``bLc`` в значение **oFF**. В противном случае запросы на изменение без данного токена не будут выполняться.

Для получения расписания конкретного устройства отправьте запрос {"cmd":2} - для контроля по полу, или {"cmd":10} - для контроля по воздуху и воздуху с ограничением по полу (для устройств с датчиком воздуха). Например, ответ для терморегулятора oz:

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "tt":{
            "0":[[360,300],[480,250],[1020,300],[1320,250]],
            "1":[[360,300],[480,250],[1020,300],[1320,250]],
            "2":[[360,300],[480,250],[1020,300],[1320,250]],
            "3":[[360,300],[480,250],[1020,300],[1320,250]],
            "4":[[360,300],[480,250],[1020,300],[1320,250]],
            "5":[[480,300],[1380,250]],
            "6":[[480,300],[1380,250]]
           }
   }

``sn`` - серийный номер устройства

``tt`` -ключ обмена расписанием при типе контроля "По полу", ``ttAir`` - ключ обмена расписанием при типе контроля "По воздуху" или "По воздуху с ограничением по полу". 

``0``, ``1``, ``2``, ``3``, ``4``, ``5``, ``6`` - ключ номера дня недели, 0-понедельник. 

В качестве аргумента используется двумерный массив с минимум одним периодом. Максимальное количество периодов для одного дня задаётся параметром ``maxSchedulePeriod`` всегда=16.

Каждый период состоит из пары значений:
   * количество минут с начала суток
   * температура в градусах (*10)

Логика работы расписания следующая:
   * В рамках одного дня может быть не более 16 временных периодов
   * Начало следующего периода является временем завершения предыдущего

Например, в среду нужно установить 2 периода: 8:00 -> 28C, 18:00 -> 18C:

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "tt":{
            "2":[[480,280],[1080,180]]
           }
   }

В этом случае, если мы не задавали вручную расписание на вторник, то:
   * С начала последнего периода вторника (в заводской настройке последний период вторник начинается с 1320 минуты и поддерживает температруру 25 °С) до 480 минуты среды будет поддерживаться температура +25 °С.
   * С 480 минуты по 1080 минуту среды будет поддерживаться температура 28 °С
   * С 1080 минуты до начала следующего периода четверга будет поддерживаться температура +18 °С

.. important::
   Нельзя в одном запросе передавать несколько дней расписания.

.. note::
   Температура не может быть больше чем параметр 26 (upperLimit), меньше чем параметр 27 (lowerLimit) для работы по полу и больше чем параметр 33 (upperAirLimit), меньше чем параметр 34 (lowerAirLimit) для работы по воздуху.

.. note::
   Параметры 29 и 31, в режиме работы по расписанию и временном режиме, могут принимать значения 127 и -127, что соответствует значениям уставки **on** (нагрузка всегда включена) и **off** (нагрузка всегда отключена) в графическом интерфейсе и на дисплее устройства.