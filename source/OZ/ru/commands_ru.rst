Команды
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для получения параметров устройства служит ключ ``cmd``. 
Возможные значения:

   * 1 - запрос на получение `параметров <parameters_ru.html>`_
   * 2 - запрос на получение `расписания <schedule_ru.html>`_ при контроле по полу
   * 3 - запрос на получение времени устройства
   * 4 - запрос на получение `телеметрии <telemetry_ru.html>`_
   * 5 - запрос cброса `параметров <parameters_ru.html>`_
   * 6 - запрос cброса `расписания <schedule_ru.html>`_
   * 10 - запрос на получение `расписания <schedule_ru.html>`_ при контроле по воздуху и по воздуху с ограничением по полу

Запрос ``{"cmd":1}``

Получение `параметров <parameters_ru.html>`_

Ответ: 

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "par":[[64,6,"0"],[65,3,"300"],[23,2,"10"],
            [114,7,"0"],[115,7,"0"],[29,3,"0"],
            [66,6,"0"],[67,6,"0"],[0,6,"0"],[1,6,"0"],
            [2,2,"1"],[31,3,"230"],[3,2,"2"],[19,2,"10"],
            [18,2,"2"],[21,1,"0"],[5,3,"300"],[7,3,"50"],
            [109,7,"1"],[80,1,"0"],[81,1,"0"],[82,1,"0"],
            [25,2,"15"],[26,1,"45"],[27,1,"5"],[33,1,"35"],
            [34,1,"5"],[28,2,"16"],[17,4,"0"],[52,4,"0"],
            [53,4,"480"],[62,1,"35"],[63,1,"5"],[55,2,"24"],
            [20,1,"0"],[4,3,"230"],[6,3,"180"],[14,1,"0"],
            [15,1,"45"],[122,7,"0"],[35,2,"1"],[36,7,"1"],
            [117,7,"0"],[118,7,"0"],[121,7,"0"],[124,7,"0"],
            [125,7,"0"],[120,7,"0"]]
   }

Запрос ``{"cmd":2}``

Получение `расписания <schedule_ru.html>`_

Ответ:

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "tt":{
            "0":[[360,300],[480,250],[1020,300],[1320,250]],
            "1":[[360,300],[480,250],[1020,300],[1320,250]],
            "2":[[360,300],[480,250],[1020,300],[1320,250]],
            "3":[[360,300],[480,250],[1020,300],[1320,250]],
            "4":[[360,300],[480,250],[1020,300],[1320,250]],
            "5":[[480,300],[1380,250]],
            "6":[[480,300],[1380,250]]
           }
   }

Запрос ``{"cmd":3}``

Получение времени устройства:

Ответ: 

.. code-block:: json

   {
      "sn":"9C9E6E854B44D8D5EBEBD50000014C",
      "time":"799767640", 
      "tzone":"3"
   }

Где ``time`` - время в секундах от 01.01.2000 00:00
    ``tzone`` - часовой пояс

Запрос ``{"cmd":4}``

Получение `телеметрии <telemetry_ru.html>`_

Ответ:

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "t.0":"482","t.1":"399","t.2":"371","t.5":"368",
      "m.0":"2","m.1":"3","m.2":"1","m.5":"0","m.6":"255",
      "o.0":"-64","o.1":"1","o.5":"0","o.2":"0","o.4":"61",
      "t.7":"692","m.3":"0","f.3":"0","f.4":"0","f.5":"0",
      "f.6":"0","f.8":"0","f.7":"0","f.13":"0","f.0":"0",
      "f.17":"0","f.16":"0","f.9":"0","f.11":"0","f.12":"0",
      "f.20":"0","f.21":"0","f.22":"1","f.23":"0",
      "par.26":"45","par.27":"5","par.33":"35","par.34":"5",
      "time":"799767684","setPointStep":"0.5","setPointType":"3"
   }

Запрос ``{"cmd":5}``

Запрос сброса `параметров <parameters_ru.html>`_ на значение по умолчанию. В запрос необходимо включить «sn». При установленной блокировки изменений из локальной сети ([114,7,"1"]) в запрос необходимо включить ключ «auth» (см. `Безопасность <safety_ru.html>`_).

.. code-block:: json

   {"cmd":5,"sn":"404CCAAAD4E8A89860609800000149" }

Ответ:

При ([114,7,"0"]) (см. `Безопасность <safety_ru.html>`_):

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "par":[[64,6,"725328000"],[65,3,"300"],[23,2,"10"],
            [114,7,"0"],[115,7,"0"],[29,3,"300"],[66,6,"0"],
            [67,6,"0"],[0,6,"0"],[1,6,"0"],[2,2,"1"],[31,3,"300"],
            [3,2,"0"],[19,2,"10"],[18,2,"2"],[21,1,"0"],[5,3,"300"],
            [7,3,"50"],[109,7,"0"],[80,1,"0"],[81,1,"0"],[82,1,"0"],
            [25,2,"15"],[26,1,"45"],[27,1,"5"],[33,1,"35"],
            [34,1,"5"],[28,2,"16"],[17,4,"0"],[52,4,"1320"],
            [53,4,"480"],[62,1,"35"],[63,1,"5"],[55,2,"24"],
            [20,1,"0"],[4,3,"230"],[6,3,"180"],[14,1,"5"],
            [15,1,"45"],[122,7,"0"],[35,2,"1"],[36,7,"0"],
            [117,7,"0"],[118,7,"0"],[121,7,"0"],[124,7,"0"],
            [125,7,"0"],[120,7,"0"]]
   }

При ([114,7,"1"]) (см. `Безопасность <safety_ru.html>`_):

.. code-block:: json

   {"sn":"404CCAAAD4E8A89860609800000149","success":"block"}

Запрос ``{"cmd":6}``

Запрос сброса `расписания <schedule_ru.html>`_ на значение по умолчанию. В запрос необходимо включить «sn». При установленной блокировки изменений из локальной сети ([114,7,"1"]) в запрос необходимо включить ключ «auth» (см. `Безопасность <safety_ru.html>`_).

.. code-block:: json

   {"cmd":6,"sn":"404CCAAAD4E8A89860609800000149" }

Ответ:

При ([114,7,"0"]) (см. `Безопасность <safety_ru.html>`_):

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "tt":{
            "0":[[360,300],[480,250],[1020,300],[1320,250]],
            "1":[[360,300],[480,250],[1020,300],[1320,250]],
            "2":[[360,300],[480,250],[1020,300],[1320,250]],
            "3":[[360,300],[480,250],[1020,300],[1320,250]],
            "4":[[360,300],[480,250],[1020,300],[1320,250]],
            "5":[[480,300],[1380,250]],
            "6":[[480,300],[1380,250]]
           }
      }

При ([114,7,"1"]) (см. `Безопасность <safety_ru.html>`_):

.. code-block:: json

   {"sn":"404CCAAAD4E8A89860609800000149","success":"block"}

Запрос ``{"cmd":10}``

Получение `расписания <schedule_ru.html>`_ при контроле по воздуху и по воздуху с ограничением по полу

Ответ:

.. code-block:: json

   {
      "sn":"404CCAAAD4E8A89860609800000149",
      "ttAir":{
               "0":[[360,300],[480,250],[1020,300],[1320,250]],
               "1":[[360,300],[480,250],[1020,300],[1320,250]],
               "2":[[360,300],[480,250],[1020,300],[1320,250]],
               "3":[[360,300],[480,250],[1020,300],[1320,250]],
               "4":[[360,300],[480,250],[1020,300],[1320,250]],
               "5":[[480,300],[1380,250]],
               "6":[[480,300],[1380,250]]
              }
   }


.. toctree::
   :maxdepth: 1
   :caption: Подразделы команд:
   
   Параметры <parameters_ru>
   Расписание <schedule_ru>
   Телеметрия <telemetry_ru>
   Работа с временем <time_ru>